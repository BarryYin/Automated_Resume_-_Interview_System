# 面试问题管理功能演示

## 功能展示

### 1. 候选人列表 - 显示问题状态

在管理员控制台的候选人列表中，每个候选人卡片会显示：

```
┌─────────────────────────────────────────────────────┐
│ 田忠                          [已完成] [85分]       │
│                                                     │
│ [查看详情] [简历] [邀请面试] [面试反馈] [面试问题] │
│                                                     │
│ tianz@example.com                                   │
│ 应聘: Python工程师服务器端开发                      │
│ 面试日期: 2025-01-20                                │
│                                                     │
│ ✓ 已生成 10 个面试问题                              │
│ 更新于: 2025-01-20 14:30:25                         │
└─────────────────────────────────────────────────────┘
```

### 2. 面试问题模态框

点击"面试问题"按钮后，显示：

```
╔═══════════════════════════════════════════════════════════╗
║  田忠 - 面试问题管理                                      ║
║  应聘职位: Python工程师服务器端开发                       ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  面试策略                                                 ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │ 重点考察Python技术能力、AIGC领域理解、系统设计思维  │ ║
║  │ 和团队协作能力。                                    │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │ 1  [专业知识]                                       │ ║
║  │    请介绍一下您的Python开发经验和技术栈。           │ ║
║  │    ℹ️ 追问: 您最熟悉哪些Python框架？                │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │ 2  [专业技能]                                       │ ║
║  │    请描述一个您最近完成的Python项目。               │ ║
║  │    ℹ️ 追问: 在这个项目中遇到了什么技术挑战？        │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  ... (共10个问题)                                         ║
║                                                           ║
╠═══════════════════════════════════════════════════════════╣
║  [🔄 重新生成问题] [💬 提出修改意见] [关闭]              ║
╚═══════════════════════════════════════════════════════════╝
```

### 3. 提出修改意见

点击"提出修改意见"按钮后：

```
╔═══════════════════════════════════════════════════════════╗
║  提出修改意见                                             ║
╠═══════════════════════════════════════════════════════════╣
║                                                           ║
║  请描述您对当前面试问题的修改意见，AI将根据您的反馈     ║
║  重新生成更合适的问题。                                   ║
║                                                           ║
║  ┌─────────────────────────────────────────────────────┐ ║
║  │ 例如：                                              │ ║
║  │ - 问题太简单，需要更深入考察候选人的实际项目经验   │ ║
║  │ - 增加对AIGC技术理解的考察                          │ ║
║  │ - 减少理论知识，增加实践案例                        │ ║
║  │                                                     │ ║
║  │ [在此输入您的修改意见...]                           │ ║
║  │                                                     │ ║
║  └─────────────────────────────────────────────────────┘ ║
║                                                           ║
║  [取消] [提交并重新生成]                                  ║
╚═══════════════════════════════════════════════════════════╝
```

### 4. 生成过程

提交后显示加载状态：

```
╔═══════════════════════════════════════════════════════════╗
║                                                           ║
║                    ⏳ 正在生成...                         ║
║                                                           ║
║         正在根据您的反馈重新生成面试问题，请稍候...       ║
║                                                           ║
╚═══════════════════════════════════════════════════════════╝
```

### 5. 生成成功

生成完成后显示通知：

```
┌─────────────────────────────────────────┐
│ ✓ 根据您的反馈，面试问题已重新生成！    │
└─────────────────────────────────────────┘
```

## 实际使用示例

### 示例1：为新候选人生成问题

**场景**：HR收到一份新的简历，需要为候选人生成面试问题

**操作步骤**：
1. 在候选人列表找到该候选人
2. 点击"面试问题"按钮
3. 看到"暂无面试问题"提示
4. 点击"重新生成问题"
5. 等待5-10秒
6. 查看生成的10个问题
7. 确认满意后关闭

**结果**：
- 系统根据候选人简历和岗位要求生成了10个针对性问题
- 问题涵盖6个评估维度
- 问题已保存到数据库

### 示例2：调整问题深度

**场景**：HR觉得生成的问题太浅显，需要更深入

**操作步骤**：
1. 打开候选人的面试问题
2. 点击"提出修改意见"
3. 输入反馈：
   ```
   问题太简单，需要更深入考察候选人的实际项目经验。
   特别是在大规模系统设计、性能优化、团队协作方面的经验。
   增加一些具体的技术场景问题。
   ```
4. 点击"提交并重新生成"
5. 等待AI重新生成
6. 查看新问题

**结果**：
- AI根据反馈调整了问题的深度和方向
- 新问题更加注重实践经验和具体场景
- 问题更符合岗位要求

### 示例3：针对特定技术栈调整

**场景**：候选人简历显示精通某个特定技术，需要重点考察

**操作步骤**：
1. 打开候选人的面试问题
2. 点击"提出修改意见"
3. 输入反馈：
   ```
   候选人简历显示有丰富的FastAPI和异步编程经验，
   请增加这方面的深度问题。
   同时增加对微服务架构和容器化部署的考察。
   ```
4. 提交并重新生成
5. 查看调整后的问题

**结果**：
- 新问题更加针对候选人的技术特长
- 增加了FastAPI、异步编程相关的深度问题
- 面试更有针对性

## API调用示例

### 获取候选人问题

```bash
curl http://localhost:8000/api/candidates/1/questions
```

**响应**：
```json
{
  "candidate_id": 1,
  "candidate_name": "田忠",
  "has_questions": true,
  "questions": [
    {
      "id": 1,
      "dimension": "Knowledge",
      "question": "请介绍一下您的Python开发经验和技术栈。",
      "follow_up": "您最熟悉哪些Python框架？"
    },
    ...
  ],
  "strategy": "重点考察Python技术能力...",
  "created_at": "2025-01-20 14:30:25",
  "updated_at": "2025-01-20 14:30:25"
}
```

### 生成新问题

```bash
curl -X POST http://localhost:8000/api/candidates/1/generate-questions \
  -H "Content-Type: application/json" \
  -d '{
    "candidate_id": 1,
    "candidate_name": "田忠",
    "candidate_email": "tianz@example.com",
    "position": "Python工程师服务器端开发",
    "position_code": "1001"
  }'
```

### 根据反馈重新生成

```bash
curl -X POST http://localhost:8000/api/candidates/1/generate-questions \
  -H "Content-Type: application/json" \
  -d '{
    "candidate_id": 1,
    "candidate_name": "田忠",
    "candidate_email": "tianz@example.com",
    "position": "Python工程师服务器端开发",
    "position_code": "1001",
    "feedback": "问题需要更加深入，增加对AIGC技术的考察"
  }'
```

## 数据流程

```
┌─────────────┐
│  管理员     │
│  控制台     │
└──────┬──────┘
       │
       │ 1. 点击"面试问题"
       ▼
┌─────────────────────┐
│  加载候选人问题     │
│  GET /api/candidates│
│  /{id}/questions    │
└──────┬──────────────┘
       │
       │ 2. 显示问题或"暂无问题"
       ▼
┌─────────────────────┐
│  管理员查看/编辑    │
└──────┬──────────────┘
       │
       │ 3a. 直接重新生成
       │     或
       │ 3b. 提出修改意见
       ▼
┌─────────────────────┐
│  调用生成API        │
│  POST /api/candidates│
│  /{id}/generate-    │
│  questions          │
└──────┬──────────────┘
       │
       │ 4. AI生成问题
       ▼
┌─────────────────────┐
│  保存到数据库       │
│  interview_questions│
└──────┬──────────────┘
       │
       │ 5. 返回新问题
       ▼
┌─────────────────────┐
│  显示新问题         │
└─────────────────────┘
       │
       │ 6. 候选人开始面试
       ▼
┌─────────────────────┐
│  加载保存的问题     │
│  用于面试           │
└─────────────────────┘
```

## 技术亮点

1. **智能生成**：基于LLM的问题生成，结合简历和岗位要求
2. **反馈优化**：支持根据管理员反馈迭代优化问题
3. **数据持久化**：问题保存到数据库，确保一致性
4. **用户体验**：流畅的交互，实时反馈，加载状态提示
5. **灵活性**：支持多次重新生成，直到满意为止

## 总结

这个功能实现了完整的面试问题管理流程：

✅ 自动生成个性化问题
✅ 管理员可审核和调整
✅ 支持反馈迭代优化
✅ 问题持久化保存
✅ 面试时使用预设问题

大大提高了面试的准备效率和质量！
